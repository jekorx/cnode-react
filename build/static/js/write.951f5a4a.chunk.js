(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{234:function(t,e,a){t.exports={container:"write_container__Lld7A",item:"write_item__2gG6w",ignore:"write_ignore__3d2EL"}},242:function(t,e,a){"use strict";a.r(e);var n,c=a(2),r=a(3),o=a(6),i=a(5),l=a(7),s=a(0),u=a.n(s),h=a(15),p=a(196),d=(a(198),a(199)),f=a.n(d),m=(a(217),a(219)),b=a.n(m),v=(a(204),a(205)),g=a.n(v),j=(a(220),a(224)),y=a.n(j),O=(a(114),a(46)),w=a.n(O),_=a(97),k=(a(117),a(119)),C=a.n(k),E=a(234),S=a.n(E),D=a(79),A=a(50),I=C.a.Item,G=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(t=Object(i.a)(e)).call.apply(t,[this].concat(r)))).state={types:Object.entries(D).map(function(t){return{value:t[0],label:t[1]}}),title:"",tab:"dev",content:""},a.queryData=function(t){A.a.get("topic/".concat(t,"?mdrender=false")).then(function(t){var e=t.success,n=t.data,c=n.title,r=n.tab,o=n.content;e&&a.setState({title:c,tab:r,content:o})})},a.handleChange=function(t,e){a.setState(Object(_.a)({},e,t instanceof Array&&t.length>0?t[0]:t))},a.handleCommit=function(t){t.preventDefault();var e=a.state,n=e.title,c=e.tab,r=e.content,o=a.props,i=o.atk,l=o.topicId,s=o.handleSaved;c?!n||n.length<10?w.a.fail("\u8bf7\u8f93\u516510\u5b57\u4ee5\u4e0a\u7684\u6807\u9898\uff01",1):r?A.a.post("topics".concat(l?"/update":""),Object.assign({accesstoken:i,title:n,tab:c,content:r},l&&{topic_id:l})).then(function(t){var e=t.success,a=t.error_msg;e?(w.a.success("\u4fdd\u5b58\u6210\u529f\uff01",0),setTimeout(s,1e3)):w.a.fail(a,2)}):w.a.fail("\u8bf7\u8f93\u5165\u4e3b\u4f53\u5185\u5bb9\uff01",1):w.a.fail("\u8bf7\u9009\u62e9\u677f\u5757\uff01",1)},a}return Object(l.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){this.titleRef.focus();var t=this.props.topicId;t&&this.queryData(t)}},{key:"render",value:function(){var t=this,e=this.state,a=e.types,n=e.tab,c=e.title,r=e.content,o=D[n];return u.a.createElement(C.a,{className:S.a.container},u.a.createElement(y.a,{title:"\u9009\u62e9\u677f\u5757",cols:1,data:a,value:[n],onOk:function(e){return t.handleChange(e,"tab")}},u.a.createElement(I,{extra:o,className:[S.a.item,S.a.ignore].join(" "),arrow:"horizontal"},"\u677f\u5757")),u.a.createElement(g.a,{clear:!0,ref:function(e){t.titleRef=e},className:[S.a.item,S.a.ignore].join(" "),value:c,placeholder:"\u6807\u9898\uff0c\u5b57\u657010\u5b57\u4ee5\u4e0a",onChange:function(e){return t.handleChange(e,"title")}}),u.a.createElement(b.a,{rows:10,value:r,placeholder:"\u4e3b\u4f53\u5185\u5bb9\uff0c\u652f\u6301Markdown\u8bed\u6cd5",onChange:function(e){return t.handleChange(e,"content")}}),u.a.createElement(I,null,u.a.createElement(f.a,{type:"primary",onClick:this.handleCommit},"\u63d0\u4ea4")))}}]),e}(s.PureComponent),M=Object(h.b)("_GV_","user")(n=Object(h.c)(n=function(t){function e(){var t,a;Object(c.a)(this,e);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(a=Object(o.a)(this,(t=Object(i.a)(e)).call.apply(t,[this].concat(r)))).handleSaved=function(){a.props.history.goBack()},a}return Object(l.a)(e,t),Object(r.a)(e,[{key:"componentDidMount",value:function(){var t=this.props,e=t.history;(0,t._GV_.setTitle)({path:e.location.pathname})}},{key:"render",value:function(){var t=this.props,e=t.user.accessToken,a=t.match.params;return u.a.createElement(G,{atk:e,topicId:a.id,handleSaved:this.handleSaved})}}]),e}(s.Component))||n)||n,N=Object(p.a)(M);e.default=N}}]);