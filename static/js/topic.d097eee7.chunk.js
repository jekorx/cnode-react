webpackJsonp([2],{270:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(296);t.default=a.a},275:function(e,t,n){"use strict";n(19),n(65),n(277)},276:function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function o(e){return"string"===typeof e}function r(e){return o(e.type)&&S(e.props.children)?k.default.cloneElement(e,{},e.props.children.split("").join(" ")):o(e)?(S(e)&&(e=e.split("").join(" ")),k.default.createElement("span",null,e)):e}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),c=a(i),s=n(15),l=a(s),u=n(2),p=a(u),d=n(3),f=a(d),b=n(4),m=a(b),h=n(5),y=a(h),g=n(7),v=a(g),w=n(0),k=a(w),x=n(98),_=a(x),E=n(66),O=a(E),j=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols)for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)t.indexOf(a[o])<0&&(n[a[o]]=e[a[o]]);return n},C=/^[\u4e00-\u9fa5]{2}$/,S=C.test.bind(C),N=function(e){function t(){return(0,p.default)(this,t),(0,m.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,y.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e,t=this.props,n=t.children,a=t.className,o=t.prefixCls,i=t.type,s=t.size,u=t.inline,p=t.disabled,d=t.icon,f=t.loading,b=t.activeStyle,m=t.activeClassName,h=t.onClick,y=j(t,["children","className","prefixCls","type","size","inline","disabled","icon","loading","activeStyle","activeClassName","onClick"]),g=f?"loading":d,w=(0,v.default)(o,a,(e={},(0,l.default)(e,o+"-primary","primary"===i),(0,l.default)(e,o+"-ghost","ghost"===i),(0,l.default)(e,o+"-warning","warning"===i),(0,l.default)(e,o+"-small","small"===s),(0,l.default)(e,o+"-inline",u),(0,l.default)(e,o+"-disabled",p),(0,l.default)(e,o+"-loading",f),(0,l.default)(e,o+"-icon",!!g),e)),x=k.default.Children.map(n,r),E=void 0;if("string"===typeof g)E=k.default.createElement(O.default,{"aria-hidden":"true",type:g,size:"small"===s?"xxs":"md",className:o+"-icon"});else if(g){var C=g.props&&g.props.className,S=(0,v.default)("am-icon",o+"-icon","small"===s?"am-icon-xxs":"am-icon-md");E=k.default.cloneElement(g,{className:C?C+" "+S:S})}return k.default.createElement(_.default,{activeClassName:m||(b?o+"-active":void 0),disabled:p,activeStyle:b},k.default.createElement("a",(0,c.default)({role:"button",className:w},y,{onClick:p?void 0:h,"aria-disabled":p}),E,x))}}]),t}(k.default.Component);N.defaultProps={prefixCls:"am-button",size:"large",inline:!1,disabled:!1,loading:!1,activeStyle:{}},t.default=N,e.exports=t.default},277:function(e,t,n){var a=n(278);"string"===typeof a&&(a=[[e.i,a,""]]);var o={hmr:!1};o.transform=void 0;n(268)(a,o);a.locals&&(e.exports=a.locals)},278:function(e,t,n){t=e.exports=n(267)(!1),t.push([e.i,'.am-button{display:block;outline:0 none;-webkit-appearance:none;-webkit-box-sizing:border-box;box-sizing:border-box;padding:0;text-align:center;font-size:18px;height:47px;line-height:47px;overflow:hidden;text-overflow:ellipsis;word-break:break-word;white-space:nowrap;color:#000;background-color:#fff;border:1px solid #ddd;border-radius:5px}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){html:not([data-scale]) .am-button{position:relative;border:none}html:not([data-scale]) .am-button:before{content:"";position:absolute;left:0;top:0;width:200%;height:200%;border:1px solid #ddd;border-radius:10px;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(.5);transform:scale(.5);-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}}.am-button-borderfix:before{-webkit-transform:scale(.49)!important;transform:scale(.49)!important}.am-button.am-button-active{background-color:#ddd}.am-button.am-button-disabled{color:rgba(0,0,0,.3);opacity:.6}.am-button-primary{color:#fff;background-color:#108ee9;border:1px solid #108ee9;border-radius:5px}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){html:not([data-scale]) .am-button-primary{position:relative;border:none}html:not([data-scale]) .am-button-primary:before{content:"";position:absolute;left:0;top:0;width:200%;height:200%;border:1px solid #108ee9;border-radius:10px;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(.5);transform:scale(.5);-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}}.am-button-primary.am-button-active{color:hsla(0,0%,100%,.3);background-color:#0e80d2}.am-button-primary.am-button-disabled{color:hsla(0,0%,100%,.6);opacity:.4}.am-button-ghost{color:#108ee9;background-color:transparent;border:1px solid #108ee9;border-radius:5px}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){html:not([data-scale]) .am-button-ghost{position:relative;border:none}html:not([data-scale]) .am-button-ghost:before{content:"";position:absolute;left:0;top:0;width:200%;height:200%;border:1px solid #108ee9;border-radius:10px;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(.5);transform:scale(.5);-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}}.am-button-ghost.am-button-active{color:rgba(16,142,233,.6);background-color:transparent;border:1px solid rgba(16,142,233,.6);border-radius:5px}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){html:not([data-scale]) .am-button-ghost.am-button-active{position:relative;border:none}html:not([data-scale]) .am-button-ghost.am-button-active:before{content:"";position:absolute;left:0;top:0;width:200%;height:200%;border:1px solid rgba(16,142,233,.6);border-radius:10px;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(.5);transform:scale(.5);-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}}.am-button-ghost.am-button-disabled{color:rgba(0,0,0,.1);border:1px solid rgba(0,0,0,.1);border-radius:5px;opacity:1}@media (-webkit-min-device-pixel-ratio:2),(min-resolution:2dppx){html:not([data-scale]) .am-button-ghost.am-button-disabled{position:relative;border:none}html:not([data-scale]) .am-button-ghost.am-button-disabled:before{content:"";position:absolute;left:0;top:0;width:200%;height:200%;border:1px solid rgba(0,0,0,.1);border-radius:10px;-webkit-transform-origin:0 0;transform-origin:0 0;-webkit-transform:scale(.5);transform:scale(.5);-webkit-box-sizing:border-box;box-sizing:border-box;pointer-events:none}}.am-button-warning{color:#fff;background-color:#e94f4f}.am-button-warning.am-button-active{color:hsla(0,0%,100%,.3);background-color:#d24747}.am-button-warning.am-button-disabled{color:hsla(0,0%,100%,.6);opacity:.4}.am-button-inline{display:inline-block;padding:0 15px}.am-button-small{font-size:13px;height:30px;line-height:30px;padding:0 15px}.am-button-icon{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.am-button>.am-button-icon{margin-right:.5em}',""])},290:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return m});var i,c,s=n(0),l=n.n(s),u=n(1),p=n.n(u),d=n(28),f=n.n(d),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),m=(c=i=function(e){function t(){return a(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return r(t,e),b(t,[{key:"render",value:function(){var e=this.props.cnt;return l.a.createElement("section",{className:["markdown-body",f.a.html].join(" "),dangerouslySetInnerHTML:{__html:e}})}}]),t}(s.PureComponent),i.propTypes={cnt:p.a.string},c)},291:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return x});var i,c,s=n(275),l=(n.n(s),n(276)),u=n.n(l),p=n(99),d=(n.n(p),n(100)),f=n.n(d),b=n(0),m=n.n(b),h=n(1),y=n.n(h),g=n(102),v=n.n(g),w=n(63),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),x=(c=i=function(e){function t(){var e,n,r,i;a(this,t);for(var c=arguments.length,s=Array(c),l=0;l<c;l++)s[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={content:""},r.handleInput=function(e){var t=e.target;r.setState({content:t.value})},r.handleCommit=function(){var e=r.state.content;if(!e)return void f.a.fail("\u8bf7\u8f93\u5165\u56de\u590d\u5185\u5bb9\uff01",1);var t=r.props,n=t.atk,a=t.topicId,o=t.replyId,i=t.handleSucc;w.a.post("topic/"+a+"/replies",Object.assign({accesstoken:n,content:e},o?{reply_id:o}:{})).then(function(e){e.success&&(f.a.success("\u56de\u590d\u6210\u529f\uff01",0),r.setState({content:""}),setTimeout(i,1e3))})},i=n,o(r,i)}return r(t,e),k(t,[{key:"componentDidMount",value:function(){var e=this.props.replayName;e&&this.setState({content:"[@"+e+"](/user/"+e+") "})}},{key:"render",value:function(){var e=this.state.content,t=this.props.handleCancel;return m.a.createElement("div",{className:v.a.comment},m.a.createElement("textarea",{placeholder:"\u652f\u6301Markdown\u8bed\u6cd5",className:v.a.textarea,value:e,onChange:this.handleInput}),m.a.createElement("div",{className:v.a.btns},m.a.createElement(u.a,{inline:!0,size:"small",type:"primary",className:v.a.btn,onClick:this.handleCommit},"\u56de\u590d"),t&&m.a.createElement(u.a,{inline:!0,size:"small",type:"ghost",className:v.a.btn,onClick:t},"\u53d6\u6d88")))}}]),t}(b.PureComponent),i.propTypes={atk:y.a.string,topicId:y.a.string,replyId:y.a.string,replayName:y.a.string,handleSucc:y.a.func,handleCancel:y.a.func},c)},296:function(e,t,n){"use strict";function a(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function a(o,r){try{var i=t[o](r),c=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(c).then(function(e){a("next",e)},function(e){a("throw",e)});e(c)}return a("next")})}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c,s,l,u,p=n(103),d=(n.n(p),n(104)),f=n.n(d),b=n(42),m=n.n(b),h=n(106),y=(n.n(h),n(107)),g=n.n(y),v=n(0),w=n.n(v),k=n(9),x=n(1),_=n.n(x),E=n(8),O=n(63),j=n(108),C=n(109),S=n(64),N=n(297),T=n(299),R=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),P=(c=Object(k.inject)("_GV_","user"))(s=Object(k.observer)((u=l=function(e){function t(e){o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={topic:{},showBackTop:!1,refreshing:!1,list:[],dataSource:new g.a.DataSource({rowHasChanged:function(e,t){return e.id!==t.id||e.showComment!==t.showComment}}),pageSize:14,height:0},n.handleScroll=function(e){n.setState({showBackTop:e.target.scrollTop>200})},n.handleBackTop=function(){n.setState({showBackTop:!1},function(){n.listViewRef.scrollTo(0)})},n.handleRefresh=function(){n.setState({refreshing:!0},n.queryData)},n.handleReply=function(e){var t=n.props,a=t.user.accessToken,o=t.history;if(Object(S.a)(a,o)){var r=n.state.list.map(function(t,n){return Object.assign({},t,n>0&&{showComment:n===+e})});n.setState({dataSource:n.state.dataSource.cloneWithRows(r)})}},n.queryData=n.queryData.bind(n),n}return i(t,e),R(t,[{key:"componentDidMount",value:function(){var e=this.props._GV_.headerHeight;this.setState({height:(document.documentElement.clientHeight||document.body.clientHeight)-e}),this.queryData()}},{key:"queryData",value:function(){function e(){return t.apply(this,arguments)}var t=a(m.a.mark(function e(){var t,n,a,o,r,i,c,s,l;return m.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.match.params,a=t._GV_.setTitle,o=t.user.accessToken,a({title:""}),e.next=4,O.a.get("topic/"+n.id+"?accesstoken="+o);case 4:r=e.sent,i=r.success,c=r.data,i&&(s=Object.assign({},c),l=[s].concat(c.replies),delete s.replies,this.setState({topic:c,refreshing:!1,list:l,dataSource:this.state.dataSource.cloneWithRows(l)}));case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"render",value:function(){var e=this,t=this.state,n=t.topic,a=t.showBackTop,o=t.dataSource,r=t.height,i=t.pageSize,c=t.refreshing,s=this.props.user,l=s.accessToken,u=s.id;return w.a.createElement(v.Fragment,null,w.a.createElement(g.a,{ref:function(t){e.listViewRef=t},dataSource:o,pageSize:i,style:{height:r,overflow:"auto"},onScroll:this.handleScroll,scrollEventThrottle:800,scrollRenderAheadDistance:400,pullToRefresh:w.a.createElement(f.a,{refreshing:c,onRefresh:this.handleRefresh,indicator:C.a}),renderRow:function(t,a,o){return 0===+o?w.a.createElement(N.a,{topic:t,atk:l,authorId:u,handleSucc:e.queryData}):w.a.createElement(T.a,{key:t.id,rowId:+o,data:t,atk:l,topicId:n.id,author:n.author&&n.author.loginname,handleSucc:e.queryData,handleReply:function(){return e.handleReply(o)},handleCancel:function(){return e.handleReply(-1)}})}}),w.a.createElement(j.a,{show:a,handleClick:this.handleBackTop}))}}]),t}(v.Component),l.propTypes={_GV_:_.a.shape({setTitle:_.a.func.isRequired,headerHeight:_.a.number.isRequired}).isRequired,user:_.a.shape({id:_.a.string,accessToken:_.a.string}).isRequired,match:_.a.shape({params:_.a.object.isRequired}).isRequired,history:_.a.object.isRequired},s=u))||s)||s;t.a=Object(E.withRouter)(P)},297:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}n.d(t,"a",function(){return E});var i,c,s=n(275),l=(n.n(s),n(276)),u=n.n(l),p=n(0),d=n.n(p),f=n(1),b=n.n(f),m=n(8),h=n(113),y=n(27),g=n(298),v=n(102),w=n.n(v),k=n(290),x=n(291),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),E=(c=i=function(e){function t(){var e,n,r,i;a(this,t);for(var c=arguments.length,s=Array(c),l=0;l<c;l++)s[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={showComment:!1},r.handleToggleReply=function(){r.setState({showComment:!r.state.showComment})},r.handleSucc=function(){r.handleToggleReply(),r.props.handleSucc()},i=n,o(r,i)}return r(t,e),_(t,[{key:"render",value:function(){var e=this.props,t=e.topic,n=e.atk,a=e.authorId,o=this.state.showComment;return d.a.createElement("div",{className:w.a.topic},d.a.createElement("h2",{className:w.a["title-wrap"]},(t.good||t.top)&&d.a.createElement("span",{className:w.a["tag-wrap"]},d.a.createElement(h.a,{good:t.good,top:t.top,tab:t.tab,className:w.a.tag})),d.a.createElement("span",{className:w.a.title},t.title),a===t.author_id&&d.a.createElement(m.Link,{to:"/edit/"+t.id},d.a.createElement(y.a,{type:"edit",className:w.a.edit}))),t.author&&d.a.createElement(g.a,{topic:t,atk:n,authorId:a}),d.a.createElement(k.a,{cnt:t.content}),d.a.createElement("h3",{className:w.a["reply-header"]},d.a.createElement("strong",null,d.a.createElement("span",{className:w.a["reply-count"]},t.reply_count),"\u56de\u590d"),d.a.createElement(u.a,{inline:!0,size:"small",type:"ghost",className:w.a["reply-add"],onClick:this.handleToggleReply},o?"\u53d6\u6d88":"\u6dfb\u52a0\u56de\u590d")),d.a.createElement("div",{style:{display:o?"block":"none"}},d.a.createElement(x.a,{atk:n,topicId:t.id,handleSucc:this.handleSucc})))}}]),t}(p.Component),i.propTypes={handleSucc:b.a.func,topic:b.a.object,atk:b.a.string,authorId:b.a.string},c)},298:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,c,s=n(275),l=(n.n(s),n(276)),u=n.n(l),p=n(99),d=(n.n(p),n(100)),f=n.n(d),b=n(0),m=n.n(b),h=n(1),y=n.n(h),g=n(8),v=n(102),w=n.n(v),k=n(64),x=n(63),_=n(111),E=n.n(_),O=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),j=(c=i=function(e){function t(){var e,n,r,i;a(this,t);for(var c=arguments.length,s=Array(c),l=0;l<c;l++)s[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={isCollect:!1},r.handleCollect=function(){var e=r.props,t=e.topic.id,n=e.atk,a=e.history;if(Object(k.a)(n,a)){var o=r.state.isCollect;x.a.post("topic_collect/"+(o?"de_collect ":"collect "),{accesstoken:n,topic_id:t}).then(function(e){var t=e.success,n=e.error_msg;t?r.setState({isCollect:!o}):f.a.fail(n,1)})}},i=n,o(r,i)}return r(t,e),O(t,[{key:"componentDidMount",value:function(){this.setState({isCollect:this.props.topic.is_collect})}},{key:"render",value:function(){var e=this.props.topic,t=this.state.isCollect;return m.a.createElement("section",{className:w.a.info},m.a.createElement(g.Link,{to:"/user/"+e.author.loginname},m.a.createElement("span",{className:w.a.avatar,style:{backgroundImage:"url("+e.author.avatar_url+")"}})),m.a.createElement("div",{className:w.a.center},m.a.createElement("span",null,e.author.loginname," \xb7 \u53d1\u5e03\u4e8e ",Object(k.c)(e.create_at)),m.a.createElement("span",null,"\u6765\u81ea ",E.a[e.tab]," \xb7 ",e.visit_count," \u6b21\u6d4f\u89c8")),m.a.createElement("div",{className:w.a["collect-wrap"]},m.a.createElement(u.a,{inline:!0,size:"small",className:w.a.collect,onClick:this.handleCollect,type:t?"ghost":"primary"},t?"\u53d6\u6d88\u6536\u85cf":"\u6536\u85cf")))}}]),t}(b.PureComponent),i.propTypes={atk:y.a.string,topic:y.a.object.isRequired,history:y.a.object.isRequired},c);t.a=Object(g.withRouter)(j)},299:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i,c,s=n(99),l=(n.n(s),n(100)),u=n.n(l),p=n(0),d=n.n(p),f=n(1),b=n.n(f),m=n(8),h=n(290),y=n(27),g=n(291),v=n(102),w=n.n(v),k=n(64),x=n(63),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),E=(c=i=function(e){function t(){var e,n,r,i;a(this,t);for(var c=arguments.length,s=Array(c),l=0;l<c;l++)s[l]=arguments[l];return n=r=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(s))),r.state={uped:!1,count:0},r.handleUp=function(){var e=r.props,t=e.data,n=t.id,a=t.is_uped,o=e.atk,i=e.history;Object(k.a)(o,i)&&x.a.post("reply/"+n+"/ups ",{accesstoken:o}).then(function(e){var t=e.success,n=e.action,o=e.error_msg;t?r.setState({uped:"up"===n,count:a?"down"===n?-1:0:"up"===n?1:0}):u.a.fail(o,1)})},i=n,o(r,i)}return r(t,e),_(t,[{key:"componentDidMount",value:function(){this.setState({uped:this.props.data.is_uped})}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.rowId,a=e.atk,o=e.topicId,r=e.author,i=e.handleSucc,c=e.handleCancel,s=e.handleReply,l=this.state,u=l.uped,p=l.count;return d.a.createElement("div",{id:t.id,className:w.a.reply},d.a.createElement("section",{className:w.a.user},d.a.createElement(m.Link,{to:"/user/"+t.author.loginname},d.a.createElement("span",{className:w.a.avatar,style:{backgroundImage:"url("+t.author.avatar_url+")"}})),d.a.createElement("div",{className:w.a["reply-info"]},d.a.createElement("span",{className:w.a["reply-left"]},d.a.createElement("span",{className:w.a["reply-name"]},t.author.loginname),d.a.createElement("a",{href:"#"+t.id,className:w.a.anchor},n+1," \u697c \xb7 ",Object(k.c)(t.create_at)),t.author.loginname===r&&d.a.createElement("span",{className:w.a["tag-author"]},"\u4f5c\u8005")),d.a.createElement("span",{className:w.a["reply-right"]},d.a.createElement(y.a,{type:u?"uped":"up",className:w.a["reply-icon"],onClick:this.handleUp}),d.a.createElement("span",{className:w.a["up-count"]},t.ups.length+p),d.a.createElement(y.a,{type:"reply",className:w.a["reply-icon"],onClick:s})))),d.a.createElement(h.a,{cnt:t.content}),t.showComment&&d.a.createElement(g.a,{atk:a,topicId:o,replyId:t.id,replayName:t.author.loginname,handleSucc:i,handleCancel:c}))}}]),t}(p.PureComponent),i.propTypes={data:b.a.object,rowId:b.a.number,author:b.a.string,topicId:b.a.string,handleSucc:b.a.func,handleReply:b.a.func,handleCancel:b.a.func,atk:b.a.string,history:b.a.object.isRequired},c);t.a=Object(m.withRouter)(E)}});