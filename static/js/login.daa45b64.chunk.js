(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{216:function(e,t,n){e.exports={form:"login_form__20Zh_","ignore-input":"login_ignore-input__2j8B1"}},243:function(e,t,n){"use strict";n.r(t);var a,r,i=n(2),s=n(3),c=n(6),o=n(5),u=n(7),l=n(0),p=n.n(l),f=n(194),h=n(15),b=(n(198),n(199)),m=n.n(b),d=(n(204),n(205)),j=n.n(d),g=n(25),O=n.n(g),v=(n(114),n(46)),k=n.n(v),_=n(36),w=n(38),y=n(50),L=n(216),E=n.n(L),T=Object(h.b)("_GV_","user")(a=Object(h.c)(a=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(c.a)(this,Object(o.a)(t).call(this,e))).state={loading:!1},n.handleLogin=n.handleLogin.bind(Object(w.a)(n)),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){this.inputRef&&this.inputRef.focus(),this.props._GV_.setTitle({path:"/login"})}},{key:"handleLogin",value:function(){var e=Object(_.a)(O.a.mark(function e(t){var n,a,r=this;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n=this.inputRef.state.value){e.next=5;break}return k.a.fail("\u8bf7\u8f93\u5165Access Token\uff01",1),e.abrupt("return");case 5:return e.next=7,y.a.post("accesstoken",{accesstoken:n});case 7:(a=e.sent).success&&(k.a.success("\u767b\u5f55\u6210\u529f\uff01",0),setTimeout(function(){r.props.user.setUserInfo({id:a.id,name:a.loginname,avatar:a.avatar_url,isLogin:!0,accessToken:n})},1e3));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state.loading;return p.a.createElement("form",{className:E.a.form},p.a.createElement(j.a,{ref:function(t){e.inputRef=t},clear:!0,placeholder:"Access Token",className:E.a["ignore-input"]}),p.a.createElement(m.a,{type:"primary",loading:t,disabled:t,onClick:this.handleLogin},"\u767b\u5f55"))}}]),t}(l.Component))||a)||a,x=Object(h.b)("user")(r=Object(h.c)(r=function(e){function t(){return Object(i.a)(this,t),Object(c.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props,t=e.user.isLogin,n=e.location.state,a={pathname:"/"};return n&&(a=n.from),t?p.a.createElement(f.a,{to:a}):p.a.createElement(T,null)}}]),t}(l.Component))||r)||r;t.default=x}}]);